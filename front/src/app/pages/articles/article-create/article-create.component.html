<main class="create-container">
  <header class="page-header">
    <app-back-button destination="/articles"></app-back-button>
    <h1>Créer un nouvel article</h1>
  </header>

  <form
    [formGroup]="articleForm"
    (ngSubmit)="onSubmit()"
    class="article-form"
    aria-label="Formulaire de création d'article"
  >
    <div class="form-group">
      <label for="theme-select">Thème <span class="required">*</span></label>
      <select
        id="theme-select"
        formControlName="theme_id"
        class="custom-select"
        aria-required="true"
      >
        <option [ngValue]="null" disabled selected>Choisir un thème</option>
        @for (theme of themes(); track theme.id) {
          <option [value]="theme.id">{{ theme.title }}</option>
        }
      </select>
      @if (
        articleForm.get("theme_id")?.invalid &&
        articleForm.get("theme_id")?.touched
      ) {
        <span class="error-msg">Veuillez sélectionner un thème.</span>
      }
    </div>

    <div class="form-group">
      <label for="article-title"
        >Titre de l'article <span class="required">*</span></label
      >
      <input
        id="article-title"
        type="text"
        formControlName="title"
        placeholder="Titre de l'article"
        class="custom-input"
        aria-required="true"
        [attr.aria-invalid]="
          articleForm.get('title')?.invalid && articleForm.get('title')?.touched
        "
      />
      @if (
        articleForm.get("title")?.invalid && articleForm.get("title")?.touched
      ) {
        <span class="error-msg"
          >Le titre doit contenir au moins 5 caractères.</span
        >
      }
    </div>

    <div class="form-group">
      <label for="article-content"
        >Contenu de l'article <span class="required">*</span></label
      >
      <textarea
        id="article-content"
        formControlName="content"
        placeholder="Contenu de l'article"
        rows="10"
        class="custom-textarea"
        aria-required="true"
        [attr.aria-invalid]="
          articleForm.get('content')?.invalid &&
          articleForm.get('content')?.touched
        "
      ></textarea>
      @if (
        articleForm.get("content")?.invalid &&
        articleForm.get("content")?.touched
      ) {
        <span class="error-msg"
          >Le contenu doit contenir au moins 10 caractères.</span
        >
      }
    </div>

    <div class="form-actions">
      <button
        type="submit"
        [disabled]="articleForm.invalid"
        class="submit-btn"
        aria-label="Publier l'article"
      >
        Envoyer <span class="icon-send" aria-hidden="true">➤</span>
      </button>
    </div>
  </form>
</main>
